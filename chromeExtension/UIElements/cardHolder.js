
import { inspectFile } from "../FileInspector/fileInspect";
import { FileStatus } from "../FileInspector/fileStatus";

/**
 * @class CardHolder
 */
class CardHolder {
    /**
     * @param {Element} cardHolder where the elements are going to be
     *   inserted into
     * @param {Element} cardTemplate the template for cards
     */
    constructor(cardHolder, cardTemplate) {
        this.cardHolder_ = cardHolder;
        this.cardTemplate_ = cardTemplate;
    }

    /**
     * @param {File} file 
     */
    async addCard(file) {
        const clone = this.cardTemplate_.content.cloneNode(true);
        let cardElement = clone.querySelector('div');
        let fileNameElement = cardElement.querySelector('.fileName');
        fileNameElement.textContent = file.name;

        /** @type {FileStatus} */
        let status = await inspectFile(file);
        cardElement.classList.add(status.toString());

        let statusElement = cardElement.querySelector('.fileStatus');
        statusElement.textContent = status.toString();

        this.cardHolder_.appendChild(cardElement);
    }
}

export {CardHolder};