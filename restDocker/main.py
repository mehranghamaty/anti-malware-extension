
if __name__ == "__main__":
        
    from app.app import generateApp
    import os
    from dotenv import load_dotenv
    from scanners.modelWrapper import ModelWrapper
    from scanners.scanWrapper import ScanWrapper


    load_dotenv()

    flask_config = {
        'host' : os.environ.get('FLASK_HOST', '0.0.0.0'),
        'port' : int(os.environ.get('FLASK_PORT', 8000)),
        'debug' : os.environ.get('FLASK_DEBUG', 'True')
    }

    scanner = ScanWrapper()

    
    app = generateApp(scanner)

    #doesn't seem to have context
    #atexit.register(clean_up_wrapper(resultsTracker))
    app.run(**flask_config)
