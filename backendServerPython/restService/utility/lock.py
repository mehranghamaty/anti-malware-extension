from multiprocessing import Lock

"""
    Quick and dirty solution 

    for the cache I should have a lock per key
"""
def LockDecorator(lock: Lock):
    def LockDecorator(func):
        def wrapper(*args, **kwargs):
            lock.acquire()
            try:
                res = func(*args, **kwargs)
                return res
            finally:
                lock.release()
                
            
        return wrapper
    return LockDecorator