/**
 * @class CardItem
 */
class CardItem extends HTMLElement {
    constructor() {
        super();
        this._uri = this.querySelector("[uri]");
        this._status = this.querySelector("[status]");
        this._ancilliarybutton = this.querySelector("ancilliary-button");
        this._infotag = this.querySelector("info-tag");

        if(this.classList.length != 0) {
            this._ancilliarybutton.classList.add(this.classList);
            this._infotag.classList.add(this.classList);
        }

        if(this.classList.contains("safe")) {
            this.setSafe();
        } else if(this.classList.contains("warning")) {
            this.setWarning();
        } else if(this.classList.contains("malicious")) {
            this._status.innerHTML = "Reported as possibly malicious";
        } else {
            this._progressbar = document.createElement("progress");
            this._progressbar.setAttribute("max", "100");
            this._progressbar.setAttribute("value", "50");
            this._status.appendChild(this._progressbar);
        }
    }

    /**
     * @param {File} file
     */
    setFile(file) {
        this._uri.textContent = file.name;
    }

    setSafe() {
        this.classList.remove("warning", "malicious");
        this.classList.add("safe");
        this._status.innerHTML = "Looks safe to download!";
    }

    setWarning() {
        this.classList.remove("safe", "malicious");
        this.classList.add("warning");
        this._status.innerHTML = "Something went wrong";
    }

    setMalicious() {
        this.classList.remove("safe", "warning");
        this.classList.add("malicious");
        this._status.innerHTML = "Reported as possibly malicious";
    }


}

customElements.define("card-item", CardItem);