
import { inspectFile } from "../FileInspector/fileInspect";
import { FileStatus } from "../FileInspector/fileStatus";

/**
 * @class Card
 */
class Card {
    /**
     * @param {Element} cardTemplate the template for cards
     */
    constructor(cardTemplate) {
        this.cardTemplate_ = cardTemplate;

        /** @type {FileStatus | null} */
        this.status_ = null;

        /** @type {FileStatus | undefined} */
        this.status_ = undefined;
    }

    /**
     * @param {File} file
     */
    async setFromFile(file) {
        this.name_ = file.name;
        this.status_ = await inspectFile(file);
    }

    /**
     * Renders the card object.
     * @returns HTMLElement
     */
    render() {
        if(this.name_ === undefined) {
            return null;
        }
        const clone = this.cardTemplate_.content.cloneNode(true);
        let cardElement = clone.querySelector('div');
        let fileNameElement = cardElement.querySelector('.fileName');
        fileNameElement.textContent = this.name_;

        if(this.status_) {
            cardElement.classList.add(this.status_.toString());
            let statusElement = cardElement.querySelector('.fileStatus');
            statusElement.textContent = this.status_.toString();
        }
        return cardElement;
    }
}

export { Card };