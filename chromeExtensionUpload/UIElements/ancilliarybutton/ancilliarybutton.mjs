/**
 * @class AncilliaryButton
 */
export default class AncilliaryButton extends HTMLElement {
    constructor() {
        super();
        this._prevDisplay = this.style.display;
        this.style.display = "none";
    }

    /**
     * @param {File} file 
     */
    setDownload(file) {
        this.innerHTML = "⭳";
        this.style.display =  this._prevDisplay;
        this.classList.add("safe");
        //this.href = uri;
        
        var url = URL.createObjectURL(file);
        this.setAttribute('href', url);
        this.setAttribute('download', file.name);
    }
    /**
     * @param {string} reason 
     */
    setNoDownload(reason) {
        this.innerHTML = "⌧";
        this.setAttribute("title", reason);
        this.style.display =  this._prevDisplay;
        this.classList.add("malicious");
    }


    setRetry(callback) {
        this.innerHTML = "⟳";
        this.style.display =  this._prevDisplay;
        this.classList.add("warning");
        this.onclick = callback();
    }
}

customElements.define("ancilliary-button", AncilliaryButton);