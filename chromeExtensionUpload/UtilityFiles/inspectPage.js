// File is not used currently for use with the rest
// the intent would be to inject it into the active tab,
// but having difficulty due to chrome needing to be most up 
// to date version, since not highest priority just going to leave
// it be.
const FileTypes = new Set(['exe', 'dmg', 'pdf', 'png']);
console.log('test!')
/**
 * @param {string} uri 
 * @return {string | null}
 */
function getExtension(uri) {
    const lastSlash = Math.max(uri.lastIndexOf('/'), 0) + 1;
    const uriShortended = uri.substring(lastSlash)
    const lastPeriod = lastSlash + uriShortended.lastIndexOf('.') + 1;
    if (lastPeriod === -1)
        return null;
    const ext = uri.substring(lastPeriod);
    if (ext === '')
        return null;
    return ext;
}

/**
 * @param {HTMLAnchorElement | HTMLAreaElement} anchor 
 * @return {boolean}
 */
function shouldInspect(link) {
    const ext = getExtension(link.href);
    if (ext) {
        return FileTypes.has(ext.trim());
    }
    return false;
}

var links = []
for (const link of document.links) {
    if (shouldInspect(link)) {
        links.push(link.href);
    }
}
console.log(JSON.stringify(links));
    