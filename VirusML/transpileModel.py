import sys
import joblib

from sklearn_porter import Estimator


if len(sys.argv) == 1:
    print("Usage: {} name_of_random_forest_model".format(sys.argv[0]))
    exit(1)

model_filepath = sys.argv[1]

loaded_model = joblib.load(open(model_filepath, 'rb'))

est = Estimator(loaded_model, language='js', template='attached')
output = est.port()
print(output)

est.template = 'exported'
src_path, json_path = est.save(directory='/tmp')
print(src_path, json_path)
